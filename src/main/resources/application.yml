# ===== COMMON SETTINGS =====
spring:
  application:
    name: woodexcess
  profiles:
    active: dev

    spring:
      jpa:
        properties:
          hibernate:
            show_sql: true
            format_sql: true
            use_sql_comments: true
        show-sql: true

  # Upload constraints
  servlet:
    multipart:
      enabled: true
      max-file-size: 5MB
      max-request-size: 25MB

  # Cache
  cache:
    type: simple
    cache-names: cep

  # Spring Cloud Compatibility
  cloud:
    compatibility-verifier:
      enabled: false

# JWT Configuration
jwt:
  secret: ${JWT_SECRET}
  access-expiration-ms: ${JWT_ACCESS_EXPIRATION_MS:900000}
  refresh-expiration-ms: ${JWT_REFRESH_EXPIRATION_MS:604800000}

# ViaCEP API
viacep:
  url: https://viacep.com.br/ws

# Feign
feign:
  client:
    config:
      default:
        connectTimeout: 5000
        readTimeout: 5000
        loggerLevel: basic

# AWS S3 Configuration
aws:
  s3:
    bucket-name: ${AWS_S3_BUCKET:woodexcess-listings}
    region: ${AWS_REGION:us-east-1}
    cdn-url: ${AWS_CDN_URL:}
  access-key-id: ${AWS_ACCESS_KEY_ID:}
  secret-access-key: ${AWS_SECRET_ACCESS_KEY:}

# Image upload settings
app:
  listing:
    max-images: 10
    max-file-size: 5242880  # 5MB
    allowed-extensions: jpg,jpeg,png,webp
    thumbnail:
      width: 300
      height: 300

# Logging
logging:
  level:
    root: INFO
    com.z.c.woodexcess_api: DEBUG
    org.hibernate.SQL: DEBUG
    org.hibernate.type.descriptor.sql.BasicBinder: TRACE
    org.hibernate.orm.jdbc.bind: TRACE


# WebSocket
websocket:
  allowed-origins: ${WEBSOCKET_ALLOWED_ORIGINS:http://localhost:3000,http://localhost:5173}


rate-limit:
  # Login rate limit
  capacity: 5
  refill-tokens: 5
  refill-minutes: 1

  # Message rate limit
  message-capacity: 20
  message-refill-tokens: 20
  message-refill-minutes: 1